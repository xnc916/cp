package com.xiongyuan.lottery.mypage.activity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

import com.xiongyuan.lottery.R;
import com.xiongyuan.lottery.base.BaseActivity;
import com.xiongyuan.lottery.mypage.adapter.PersonalAdapter;

import java.util.ArrayList;

import butterknife.BindView;
import butterknife.OnClick;

public class PersonalActivity extends BaseActivity {

    @BindView(R.id.list_personal)
    ListView listView;
    private PersonalAdapter adapter;
    private LinearLayout listViewHeader,listViewFoot;
    private ArrayList list;
    @BindView(R.id.iv_personal_type)
    ImageView ivType;
    @BindView(R.id.tv_personal_onlineTime)
    TextView tvOnlineTime;
    @BindView(R.id.tv_personal_name)
    TextView tvName;

    @Override
    public int getLayoutId() {
        return R.layout.activity_personal;
    }

    @Override
    public void initView(Bundle savedInstanceState) {

    }

    @Override
    public void initData() {
        list=new ArrayList<>();
        if (list.size()!=0){
            list.clear();
        }
        Intent intent = getIntent();
        if (intent!=null){
            String[] str = {intent.getStringExtra("maxRebate"),intent.getStringExtra("minRebate")};
            list.add(intent.getStringExtra("usableAmount"));
            list.add(str);
            list.add(intent.getStringExtra("usableAmount"));
            list.add(intent.getStringExtra("frozenAmount"));
            list.add(intent.getStringExtra("date"));
            list.add("");
            list.add("");

            String type = intent.getStringExtra("type");
            if (type.equals("0")){
                ivType.setImageResource(R.mipmap.vip);
            }else if (type.equals("1")){
                ivType.setImageResource(R.mipmap.putong);
            }
            tvName.setText(intent.getStringExtra("userName"));
            String onlineTime = intent.getStringExtra("onlineTime");
            if (onlineTime.equals("0")){
                tvOnlineTime.setText("不在线");
            }else if (onlineTime.equals("1")){
                tvOnlineTime.setText("在线");
            }


        }

        adapter=new PersonalAdapter(this,list);
        listViewHeader= (LinearLayout) getLayoutInflater().inflate(R.layout.listview_header_layout,listView, false);
        listViewFoot= (LinearLayout) getLayoutInflater().inflate(R.layout.listview_header_layout,listView, false);
        listView.addHeaderView(listViewHeader);
        listView.addFooterView(listViewFoot);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                switch (position){
                    case 6:
                        Intent intent=new Intent(PersonalActivity.this,ModifyRebateActivity.class);
                        intent.putExtra("type","0");
                        intent.putExtra("userId",getIntent().getStringExtra("userId"));
                        intent.putExtra("id",getIntent().getStringExtra("id"));
                        startActivity(intent);
                        break;
                    case 7:
                        Intent intent1=new Intent(PersonalActivity.this,ModifyRebateActivity.class);
                        intent1.putExtra("type","1");
                        intent1.putExtra("userId",getIntent().getStringExtra("userId"));
                        intent1.putExtra("id",getIntent().getStringExtra("id"));
                        startActivity(intent1);
                        break;
                }
            }
        });
    }

}
